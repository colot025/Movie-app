{"ast":null,"code":"import _regeneratorRuntime from\"/Users/christyolotu/vidly/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/christyolotu/vidly/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import jwtDecode from\"jwt-decode\";import http from\"./httpService\";import{apiUrl}from\"../config.json\";var apiEndpoint=apiUrl+\"/auth\";var tokenKey=\"token\";http.setJwt(getJwt());export function login(_x,_x2){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password){var _yield$http$post,jwt;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return http.post(apiEndpoint,{email:email,password:password});case 2:_yield$http$post=_context.sent;jwt=_yield$http$post.data;localStorage.setItem(tokenKey,jwt);case 5:case\"end\":return _context.stop();}}},_callee);}));return _login.apply(this,arguments);}export function loginWithJwt(jwt){localStorage.setItem(tokenKey,jwt);}export function logout(){localStorage.removeItem(tokenKey);}export function getCurrentUser(){try{var jwt=localStorage.getItem(tokenKey);return jwtDecode(jwt);}catch(ex){return null;}}export function getJwt(){return localStorage.getItem(tokenKey);}export default{login:login,loginWithJwt:loginWithJwt,logout:logout,getCurrentUser:getCurrentUser,getJwt:getJwt};","map":{"version":3,"sources":["/Users/christyolotu/vidly/src/services/authService.js"],"names":["jwtDecode","http","apiUrl","apiEndpoint","tokenKey","setJwt","getJwt","login","email","password","post","jwt","data","localStorage","setItem","loginWithJwt","logout","removeItem","getCurrentUser","getItem","ex"],"mappings":"6RAAA,MAAOA,CAAAA,SAAP,KAAsB,YAAtB,CACA,MAAOC,CAAAA,IAAP,KAAiB,eAAjB,CACA,OAASC,MAAT,KAAuB,gBAAvB,CAEA,GAAMC,CAAAA,WAAW,CAAGD,MAAM,CAAG,OAA7B,CACA,GAAME,CAAAA,QAAQ,CAAG,OAAjB,CAEAH,IAAI,CAACI,MAAL,CAAYC,MAAM,EAAlB,EAEA,eAAsBC,CAAAA,KAAtB,8C,iFAAO,iBAAqBC,KAArB,CAA4BC,QAA5B,iKACuBR,CAAAA,IAAI,CAACS,IAAL,CAAUP,WAAV,CAAuB,CAAEK,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAvB,CADvB,uCACSE,GADT,kBACGC,IADH,CAELC,YAAY,CAACC,OAAb,CAAqBV,QAArB,CAA+BO,GAA/B,EAFK,sD,wCAKP,MAAO,SAASI,CAAAA,YAAT,CAAsBJ,GAAtB,CAA2B,CAChCE,YAAY,CAACC,OAAb,CAAqBV,QAArB,CAA+BO,GAA/B,EACD,CAED,MAAO,SAASK,CAAAA,MAAT,EAAkB,CACvBH,YAAY,CAACI,UAAb,CAAwBb,QAAxB,EACD,CAED,MAAO,SAASc,CAAAA,cAAT,EAA0B,CAC/B,GAAI,CACF,GAAMP,CAAAA,GAAG,CAAGE,YAAY,CAACM,OAAb,CAAqBf,QAArB,CAAZ,CACA,MAAOJ,CAAAA,SAAS,CAACW,GAAD,CAAhB,CACD,CAAC,MAAOS,EAAP,CAAW,CACX,MAAO,KAAP,CACD,CACF,CAED,MAAO,SAASd,CAAAA,MAAT,EAAkB,CACvB,MAAOO,CAAAA,YAAY,CAACM,OAAb,CAAqBf,QAArB,CAAP,CACD,CACD,cAAe,CACbG,KAAK,CAALA,KADa,CAEbQ,YAAY,CAAZA,YAFa,CAGbC,MAAM,CAANA,MAHa,CAIbE,cAAc,CAAdA,cAJa,CAKbZ,MAAM,CAANA,MALa,CAAf","sourcesContent":["import jwtDecode from \"jwt-decode\";\nimport http from \"./httpService\";\nimport { apiUrl } from \"../config.json\";\n\nconst apiEndpoint = apiUrl + \"/auth\";\nconst tokenKey = \"token\";\n\nhttp.setJwt(getJwt());\n\nexport async function login(email, password) {\n  const { data: jwt } = await http.post(apiEndpoint, { email, password });\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function loginWithJwt(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\n\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n}\n\nexport function getJwt() {\n  return localStorage.getItem(tokenKey);\n}\nexport default {\n  login,\n  loginWithJwt,\n  logout,\n  getCurrentUser,\n  getJwt,\n};\n"]},"metadata":{},"sourceType":"module"}